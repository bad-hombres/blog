<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Bad Hombre's Blog</title>
  <meta name="theme-color" content="#222222" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://bad-hombres.github.io//blog/js/jquery.min.js"></script>
  <script src="https://bad-hombres.github.io//blog/js/bootstrap.min.js"></script>
  <script src="https://bad-hombres.github.io//blog/js/header.js"></script>
  <script src="https://bad-hombres.github.io//blog/js/toc.js"></script>
  <link href="https://bad-hombres.github.io//blog/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://bad-hombres.github.io//blog/css/theme.css" rel="stylesheet">
  <link href="https://bad-hombres.github.io//blog/css/syntax.css" rel="stylesheet">
  <link href="https://bad-hombres.github.io//blog/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link rel="shortcut icon" href="https://bad-hombres.github.io//blog/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://bad-hombres.github.io//blog/favicon.ico" type="image/x-icon">
</head>

<body>

  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-99735361-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  


 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://bad-hombres.github.io//blog/">Bad Hombre's Blog</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="https://bad-hombres.github.io//blog/">/home</a></li>
          <li><a href="https://bad-hombres.github.io//blog/archive.html">/archive</a></li>
          <li><a href="https://bad-hombres.github.io//blog/tags.html">/tags</a></li>
          <li><a href="https://bad-hombres.github.io//blog/about.html">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="https://bad-hombres.github.io//blog/2016/10/31/Using-Vagrant.html">Using Vagrant</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>31 Oct 2016</time>
                </div>
                <ul>
                  
                    <li><a href="https://bad-hombres.github.io//blog/tag/tools">tools</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <div id="toc" class="toc"></div>
                <h3>Written by xirax</h3>
                <h2 id="why">Why</h2>
<p>When I started to learn about buffer overflows and memory exploits etc I found
that lots of the tutorials and material left out the details of environment
specifics. Therefore when I came to follow through the tutorials I ended up with
radically different results, got confused and felt like giving up.</p>

<h2 id="virtualisation-ftw">Virtualisation FTW</h2>
<p>These days it is easy to run virtual machines and Oracleâ€™s virtualbox is free to
use and is stable enough to not have caused me too many issues.</p>

<p>See <a href="https://www.virtualbox.org/wiki/Downloads">here</a> to download and view
install instructions for your platform</p>

<h2 id="vagrant">Vagrant</h2>
<p>What you quickly learn is that virtual machines take up a lot of space and
become a pain in the butt to manage the configs etc. In step <a href="https://www.vagrantup.com/">vagrant</a>
to save the day.</p>

<p>Vagrant allows you to specify the box config &amp; software setup all within a ruby
file (Named Vagrantfile) and run a couple of commands and you can then ssh into
your new environment.</p>

<p>To initialize a new machine cd into a directory where you will be working and
issue</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  $ vagrant init
</code></pre>
</div>
<p>The above command generates a Vagantfile in the current directory. You edit the
config.vm.box to be a base box you desire (read docs for more info) which you
can find <a href="https://atlas.hashicorp.com/boxes/search">here</a>. You then run</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  $ vagrant up
</code></pre>
</div>
<p>which will then download the base box, create you an instance of it and allow
you to ssh into it using the command</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  $ vagrant ssh
</code></pre>
</div>
<p>Now you can do much, much more but one of the interesting feature is the ability
to automatically run provisioning scripts.</p>

<p>Below is the Vagrantfile I use for learning memory exploits, it uses ubuntu
precise 32bit for its base and I install git, pip, peda (gdb plugin) and gdb to
help with debugging. Vagrant also mounts the current directory at /vagrant on
the guest so you can share your code with the guest OS.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># -*- mode: ruby -*-</span>
<span class="c1"># vi: set ft=ruby :</span>

<span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">box</span> <span class="o">=</span> <span class="s2">"hashicorp/precise32"</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provider</span> <span class="s2">"virtualbox"</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">memory</span> <span class="o">=</span> <span class="s2">"1024"</span>
  <span class="k">end</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provision</span> <span class="s2">"shell"</span><span class="p">,</span> <span class="ss">inline: </span><span class="o">&lt;&lt;-</span><span class="no">SHELL</span><span class="sh">
    apt-get update
    apt-get install -y git
    apt-get install -y gdb
    apt-get install -y python-pip
    apt-get install -y build-essential
    git clone https://github.com/longld/peda.git /home/vagrant/peda
    chown -R vagrant:vagrant /home/vagrant/peda
    echo "source ~/peda/peda.py" &gt;&gt; /home/vagrant/.gdbinit
    chown vagrant:vagrant /home/vagrant/.gdbinit
    pip install ropgadget
</span><span class="no">  SHELL</span>
<span class="k">end</span></code></pre></figure>

<p>As you can see this is just a matter of running the relevant shell commands to
install the required software</p>

<p>Couple this with github and you can have numerous configurations of machines at
your fingertips and only download the box files etc when you need them. Vargrant
allows you to have a consistent environment throughout all your development /
research.</p>

<p>Once your down with the machine just run</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  $ vagrant halt
  $ vagrant destroy
</code></pre>
</div>
<p>remember destroy really does delete the VM so remember to do all the work you
want to keep in /vagrant or remember to copy it off of the vm in someway (iethub
etc) before you do this.</p>

                

<div class="share-bar">
  <ul class="share-buttons">
    
    <li class="share-facebook">
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://bad-hombres.github.io//2016/10/31/Using-Vagrant.html" target="_blank" title="Share on Facebook">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-facebook fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-twitter">
      <a href="https://twitter.com/intent/tweet?url=https://bad-hombres.github.io//2016/10/31/Using-Vagrant.html&text=Using Vagrant" target="_blank" title="Tweet">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-google-plus">
      <a href="https://plus.google.com/share?url=https://bad-hombres.github.io//2016/10/31/Using-Vagrant.html" target="_blank" title="Share on Google Plus">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-google-plus fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-linkedin">
      <a href="http://www.linkedin.com/shareArticle?mini=true&url=https://bad-hombres.github.io//2016/10/31/Using-Vagrant.html&title=Using Vagrant&summary=Brief post on setting up vagrant to learn buffer overflows&source=" target="_blank" title="Share on LinkedIn">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-linkedin fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-pinterest">
      <a href="http://pinterest.com/pin/create/button/?urlhttps://bad-hombres.github.io//2016/10/31/Using-Vagrant.html=&description=Brief post on setting up vagrant to learn buffer overflows" target="_blank" title="Pin it">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-pinterest fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-envelope">
      <a href="mailto:?&subject=Using Vagrant&body=Brief post on setting up vagrant to learn buffer overflows https://bad-hombres.github.io//2016/10/31/Using-Vagrant.html" target="_blank" title="Email">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-envelope-o fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

  </ul>
</div>


              </div>
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="https://bad-hombres.github.io//blog/2018/11/01/Buffer-Overflow-Level-2.html">Buffer Overflows: Level 2 (ret2libc)</a></li>
    
    <li><a href="https://bad-hombres.github.io//blog/2017/03/21/SLAE-TCP-Bind-Shell.html">SLAE: TCP Bind Shell</a></li>
    
    <li><a href="https://bad-hombres.github.io//blog/2016/11/03/Buffer-Overflow-Level-1.html">Buffer Overflows: Level 1 (ret2stack)</a></li>
    
    <li><a href="https://bad-hombres.github.io//blog/2016/11/02/Crafting-Shellcode.html">Crafting Shellcode</a></li>
    
    <li><a href="https://bad-hombres.github.io//blog/2016/11/01/Format-Strings.html">Format Strings</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/tools">tools</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/linux">linux</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/exploit">exploit</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/32bit">32bit</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/shellcode">shellcode</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/assembly">assembly</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/bufferoverflow">bufferoverflow</a></li>
    
      <li><a href="https://bad-hombres.github.io//blog/tag/slae">slae</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'bad-hombres'; // required: replace example with your forum shortname
  var disqus_identifier = "/2016/10/31/Using-Vagrant.html";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>Bad Hombres &copy; 2017</p>
          <h6>Follow us</h6>

<ul class="social-media">

  
    <li>
      <a title="bad-hombres on Github" href="https://github.com/bad-hombres" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  

  

  

  

  
    <li>
      <a title="feed.xml RSS" href="/blog/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>


          <p> Original theme from <a href="https://github.com/streetturtle/jekyll-clean-dark">Here</a>
        </div>
      </div>
    </footer>
  </body>
</html>

</div>
